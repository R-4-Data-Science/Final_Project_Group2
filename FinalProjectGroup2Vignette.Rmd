---
title: "Final_Project_Group2 Vignette"
output: html_document
date: "2023-12-02"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
## Setup
In order to use this package you must have a version of R that is 3.5.0 or higher. Start by cloning the repo "R-4-Data-Science/Final_Project_Group2". Once you open Rstudio, open the R folder and open the file "Final_Project_Group2.R" in this folder. Now go to the environment and click the "Build" tab. Once you click that, select "install" and the package will install.
```{r}
library(FinalProjectGroup2)
```
## Package
The `FinalProjectGroup2` package provides users with four functions, "logistic_regression", "plot_logistic_curve", "bootstrap function", and "cutoff_value_function"

## logistic_regression Function
The logistic_regression function performs logistic regression, a statistical method used for binary classification. It estimates the relationship between a binary dependent variable and one or more independent variables. The function begins by preparing the matrix `X` and initializing coefficient estimates \( \beta \) using the least-squares formula \( (X^TX)^{-1}X^Ty \). The core of the function iteratively updates \( \beta \) to minimize the cost function, which is calculated as the negative sum of the log-likelihoods for each observation, an implementation of the estimator formula \( \sum_{i=1}^n (-y_i \cdot \ln(p_i) - (1 - y_i) \cdot \ln(1 - p_i)) \). The probabilities \( p_i \) are computed using the logistic function \( \frac{1}{1 + \exp(-x_i^T \beta)} \). The iterative process involves gradient descent, where \( \beta \) is adjusted in the direction that reduces the cost function, provided by the gradient function. This process continues until convergence is achieved, as indicated by the change in cost function values falling below a predefined tolerance level.


#### Arguments
The arguments needed for this function are:

- X: A matrix of predictors. Each column represents a different predictor variable. The function automatically adds an intercept term.

- y: A vector of binary response variables (0 or 1) corresponding to each row in X.

- learning_rate: The step size at each iteration while moving towards a minimum of the cost function. Default is 0.01.

- max_iterations: The maximum number of iterations for the optimization process. Default is 10,000.

- tolerance: The threshold for convergence. If the change in cost function between iterations is less than this value, the optimization stops. Default is 1e-6.

#### Returns
This function will return a list containing the optimized coefficients, confusion matrix, and performance metrics, including prevalence, accuracy, sensitivity, specificity, false discovery rate, and diagnostic odds ratio.

#### Usage
This function is used for binary classification tasks where the response variable is binary (0 or 1). It's suitable for scenarios where logistic regression is an appropriate model, such as predicting the likelihood of an event occurring, based on various predictors.


#### Example
```{r}
data(mtcars)
logistic_regression(X = cbind(mtcars$mpg, mtcars$wt), y = mtcars$am)
```


## plot_logistic_curve Function
This function plots the logistic regression curve along with the original binary response data points. The function fits a logistic regression model and then uses the estimated coefficients to predict probabilities, which are plotted as a curve.

#### Arguments
The arguments needed for this function are:

- X: A numeric vector representing the predictor variable.

- y: A binary vector (0 or 1) representing the response variable.

#### Returns
A plot with the original binary response (in red) against the predictor variable and the fitted logistic regression curve (in blue).

#### Usage
Use this function to understand the relationship between a binary outcome and a single predictor. It's particularly useful for visualizing the effect of a predictor on a binary response in logistic regression models.

#### Example
```{r}
data(mtcars)
plot_logistic_curve(mtcars$wt, mtcars$am)
```


## bootstrap_function
This function computes a confidence interval for beta estimates using the bootstrap method, particularly useful for small data sets.

#### Arguments
The arguments needed for this function are:

- alpha: Significance level for the confidence interval.

- B (optional): Number of bootstrap samples. Default is 20.

- X: Predictor variable (numeric vector).

- y: Binary response variable (0 or 1).

#### Usage
Ideal for obtaining a more accurate confidence interval for beta estimates from logistic regression, especially when the original dataset is small.

#### Limitations
Currently can only take one prediction variable.

#### Example
```{r}
data(mtcars)
bootstrap_function(alpha = 0.5, B = 20, X = mtcars$wt, y = mtcars$am)
```

## cutoff_value_function
This function evaluates and plots various performance metrics for a logistic regression model with a single predictor variable over a range of cutoff values.

#### Arguments
The arguments needed for this function are:

- X: Predictor variable (numeric vector).

- y: Binary response variable (0 or 1).

- metric: The performance metric to be evaluated. Options include 'accuracy', 'sensitivity', 'specificity', 'false discovery rate', 'diagnostic odds ratio', and 'prevalence'.

#### Limitations
The current implementation of cutoff_value_function may not handle cases where any of the confusion matrix components (True Positives, True Negatives, False Positives, False Negatives) are zero, particularly when computing metrics like sensitivity, specificity, false discovery rate, and diagnostic odds ratio.

#### Usage
This function is useful for understanding how different performance metrics vary with the threshold for classifying a binary outcome. It helps in choosing an appropriate cutoff value for making predictions based on the logistic regression model.

#### Example
```{r}
data(mtcars)
cutoff_value_function(X = mtcars$wt, y = mtcars$am, "diagnostic odds ratio")
```

## CHATGPT Documents Used During Project
Creating cutsom logistic regression and plotting functions: https://chat.openai.com/share/2827b3e8-a2c6-4c1d-ab39-a42235cb1deb

Additional editing and troubleshooting, addition of metrics to logistic regression function: https://chat.openai.com/share/39e19490-5083-4928-a5ef-46666b1759e4

Creation of plotting function: https://chat.openai.com/share/b77ecd7f-58ef-4d44-9551-e0bb87087b39

Editing cutoff_value_function and general modifications: https://chat.openai.com/share/9d2dc05f-76d9-40b2-9944-4d8830bd95aa

Creating descriptions for logistic regression function: https://chat.openai.com/share/98a8ec3b-e08b-4889-afbf-9a6eeab478ae
